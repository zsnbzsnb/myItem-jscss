<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>订单详情 - 待支付</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdn.bootcdn.net/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
      .order-item:hover {
          transform: translateY(-2px);
          transition: all 0.2s ease;
      }
    </style>
  </head>
  <body class="bg-gray-50 min-h-screen">
    <div class="container mx-auto px-4 py-8 max-w-4xl">
      <!-- 订单头部信息 -->
      <div class="bg-white rounded-lg shadow-md p-6 mb-6">
        <div class="flex justify-between items-center mb-4">
          <h1 class="text-2xl font-bold text-gray-800">订单详情</h1>
          <span
            class="px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-sm font-medium"
          >
            待支付
          </span>
        </div>
        <div class="space-y-2">
          <div class="flex items-center">
            <i class="fas fa-receipt text-gray-500 mr-2"> </i>
            <span class="text-gray-600"> 订单编号： </span>
            <span class="font-medium"> ORD20231115-123456 </span>
          </div>
          <div class="flex items-center">
            <i class="fas fa-clock text-gray-500 mr-2"> </i>
            <span class="text-gray-600"> 创建时间： </span>
            <span class="font-medium"> 2023-11-15 14:30:25 </span>
          </div>
        </div>
        <!-- 收件人信息 -->
        <div class="mt-6 pt-6 border-t border-gray-200 space-y-3">
          <div class="flex items-start">
            <i class="fas fa-user text-gray-500 mr-2 mt-1"> </i>
            <div>
              <span class="text-gray-600"> 收件人： </span>
              <span class="font-medium"> 张三 </span>
            </div>
          </div>
          <div class="flex items-start">
            <i class="fas fa-phone text-gray-500 mr-2 mt-1"> </i>
            <div>
              <span class="text-gray-600"> 手机号： </span>
              <span class="font-medium"> 13800138000 </span>
            </div>
          </div>
          <div class="flex items-start">
            <i class="fas fa-map-marker-alt text-gray-500 mr-2 mt-1"> </i>
            <div>
              <span class="text-gray-600"> 收货地址： </span>
              <span class="font-medium">
                北京市朝阳区建国路88号现代城A座1001室
              </span>
            </div>
          </div>
        </div>
      </div>
      <!-- 商品列表 -->
      <div class="bg-white rounded-lg shadow-md p-6 mb-6">
        <h2 class="text-lg font-semibold text-gray-800 mb-4">商品信息</h2>
        <div class="space-y-4">
          <!-- 商品项1 -->
          <div
            class="order-item flex border-b pb-4 last:border-b-0 hover:shadow-sm"
          >
            <div class="w-24 h-24 rounded-md overflow-hidden mr-4">
              <img
                src="https://aidev.gemcoder.com/staticResource/echoAiSystemImages/44a64c8193bc4ec5362432b60b7ce7f1.png"
                alt="智能手机"
                class="w-full h-full object-cover"
              />
            </div>
            <div class="flex-1">
              <h3 class="font-medium text-gray-800">
                高端智能手机 Pro Max 256GB
              </h3>
              <p class="text-sm text-gray-500 mt-1">颜色: 星空黑</p>
              <div class="flex justify-between items-center mt-2">
                <span class="text-gray-600"> x1 </span>
                <span class="font-medium text-red-500"> ¥8999.00 </span>
              </div>
            </div>
          </div>
          <!-- 商品项2 -->
          <div
            class="order-item flex border-b pb-4 last:border-b-0 hover:shadow-sm"
          >
            <div class="w-24 h-24 rounded-md overflow-hidden mr-4">
              <img
                src="https://aidev.gemcoder.com/staticResource/echoAiSystemImages/7c43795fa894bc6397d1ba5b5418b2d7.png"
                alt="无线耳机"
                class="w-full h-full object-cover"
              />
            </div>
            <div class="flex-1">
              <h3 class="font-medium text-gray-800">真无线蓝牙耳机 Pro</h3>
              <p class="text-sm text-gray-500 mt-1">颜色: 白色</p>
              <div class="flex justify-between items-center mt-2">
                <span class="text-gray-600"> x1 </span>
                <span class="font-medium text-red-500"> ¥599.00 </span>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- 订单金额 -->
      <div class="bg-white rounded-lg shadow-md p-6 mb-6">
        <h2 class="text-lg font-semibold text-gray-800 mb-4">订单金额</h2>
        <div class="space-y-2">
          <div class="flex justify-between">
            <span class="text-gray-600"> 商品总价 </span>
            <span> ¥9598.00 </span>
          </div>
          <div class="flex justify-between">
            <span class="text-gray-600"> 运费 </span>
            <span> ¥0.00 </span>
          </div>
          <div class="flex justify-between">
            <span class="text-gray-600"> 优惠券 </span>
            <span class="text-red-500"> -¥100.00 </span>
          </div>
          <div class="border-t border-gray-200 my-3"></div>
          <div class="flex justify-between text-lg font-bold">
            <span class="text-gray-800"> 实付金额 </span>
            <span class="text-red-500"> ¥9498.00 </span>
          </div>
        </div>
      </div>
      <!-- 支付方式 -->
      <div class="bg-white rounded-lg shadow-md p-6 mb-6">
        <h2 class="text-lg font-semibold text-gray-800 mb-4">支付方式</h2>
        <div class="space-y-3">
          <label
            class="flex items-center p-3 border rounded-lg cursor-pointer hover:border-blue-500"
          >
            <input
              type="radio"
              name="payment"
              checked
              class="h-4 w-4 text-blue-600 focus:ring-blue-500"
            />
            <div class="ml-3 flex items-center">
              <i class="fab fa-alipay text-2xl text-blue-500 mr-2"> </i>
              <span> 支付宝支付 </span>
            </div>
          </label>
          <label
            class="flex items-center p-3 border rounded-lg cursor-pointer hover:border-green-500"
          >
            <input
              type="radio"
              name="payment"
              class="h-4 w-4 text-blue-600 focus:ring-blue-500"
            />
            <div class="ml-3 flex items-center">
              <i class="fab fa-weixin text-2xl text-green-500 mr-2"> </i>
              <span> 微信支付 </span>
            </div>
          </label>
        </div>
      </div>
      <!-- 操作按钮 -->
      <div class="flex justify-between mt-6">
        <button
          onclick="window.history.back()"
          class="px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50"
        >
          <i class="fas fa-arrow-left mr-2"> </i>
          返回
        </button>
        <button
          id="payBtn"
          class="px-6 py-3 bg-blue-600 rounded-lg text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"
        >
          <i class="fas fa-credit-card mr-2"> </i>
          立即支付
        </button>
      </div>
    </div>
    <script>
      document.addEventListener('DOMContentLoaded', function () {
        // 添加URL解析日志
        const fullUrl = window.location.href;
        console.log('当前完整URL:', fullUrl);
        
        const urlParams = new URLSearchParams(window.location.search);
        const userId = urlParams.get('userId');
        const productIds = urlParams.get('productIds') || '';
        
        // 添加参数检查日志
        console.log('解析到的userId:', userId);
        console.log('解析到的productIds:', productIds);

        if (userId && productIds) {
          // ...原有存储逻辑...
        } else {
          // 添加更详细的错误信息
          console.error('缺失参数:', { userId, productIds });
          alert('订单参数不完整，错误码：1001');
          window.location.href = 'myCart.html'; // 跳转回购物车
        }

        // 存储到本地缓存
        if (userId && productIds) {
          localStorage.setItem('order_userId', userId);
          localStorage.setItem('order_productIds', productIds);
        } else {
          alert('订单参数不完整');
          window.history.back();
        }

        // 支付按钮点击事件
        var payBtn = document.getElementById('payBtn');
        payBtn.addEventListener('click', function () {
          var selectedPayment = document.querySelector('input[name="payment"]:checked');
          if (selectedPayment) {
            var paymentMethod = selectedPayment.nextElementSibling.querySelector('span').textContent;
            alert("\u5373\u5C06\u8DF3\u8F6C\u5230".concat(paymentMethod, "\u9875\u9762..."));
            // 这里实际应该跳转到支付网关
          }
        });

        // 模拟订单超时倒计时
        var timerElement = document.createElement('div');
        timerElement.className = 'text-sm text-red-500 mt-2';
        timerElement.innerHTML = "<i class=\"fas fa-clock mr-1\"></i>\u8BF7\u5728<span id=\"countdown\">15:00</span>\u5185\u5B8C\u6210\u652F\u4ED8\uFF0C\u8D85\u65F6\u8BA2\u5355\u5C06\u81EA\u52A8\u53D6\u6D88";
        document.querySelector('.bg-white.rounded-lg.shadow-md.p-6.mb-6:first-child').appendChild(timerElement);
        var minutes = 15;
        var seconds = 0;
        var countdown = setInterval(function () {
          if (seconds === 0) {
            if (minutes === 0) {
              clearInterval(countdown);
              document.getElementById('countdown').textContent = '00:00';
              alert('订单已超时，请重新下单');
              return;
            }
            minutes--;
            seconds = 59;
          } else {
            seconds--;
          }
          document.getElementById('countdown').textContent = "".concat(minutes.toString().padStart(2, '0'), ":").concat(seconds.toString().padStart(2, '0'));
        }, 1000);
      });
    </script>
    

</script>
  </body>
</html>
